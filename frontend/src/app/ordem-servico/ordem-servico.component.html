<app-sidebar></app-sidebar>
<header id="header_main__cliente">

  <div>

    <div id="sideBar" class="offcanvas offcanvas-start side-bar" tabindex="-1" id="offcanvasWithBackdrop" aria-labelledby="offcanvasWithBackdropLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title color-white" id="offcanvasWithBackdropLabel">Menu</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">

        <nav>
          <ul class="menu">
            <li class="itens__menu pointer">Temas</li>
            <li class="itens__menu pointer"  routerLink="/" (click)="logOut()">Log Out</li>
            <li class="itens__menu pointer"  routerLink="/">Home</li>
          </ul>
        </nav>

      </div>
    </div>
  </div>

</header>

<main>
  <div id="imagem">

    <img  *ngIf="thereIsImage" src="{{imagem}}" alt="imagem do serviço" id="imagemServico" class="rounded img-fluid">
    <i *ngIf="!thereIsImage" class="bi bi-card-image"></i>

  </div>

  <div id="informacoes">

    <div class="mt-3">
      <p><b>Status do serviço: </b>{{status}}</p>
    </div>

    <div>
      <p><b>Cliente:</b> {{ordemServico.nomeCliente}}</p>
      <p><b>Prestador:</b> {{ordemServico.nomePrestador}}</p>
    </div>

    <div>
      <p><b>Area: </b>{{ordemServico.area}}</p>
    </div>

    <div>
      <p><b>Descrição:</b></p>
      <p>{{ordemServico.descricao}}</p>
    </div>

    <div>
      <p><b>Data solicitada: </b>{{ordemServico.dataSolicitada}}</p>
      <p *ngIf=" existe(ordemServico.tempoEstimado)" ><b>Tempo estimado: </b>{{ordemServico.tempoEstimado}}</p>
      <p *ngIf=" existe(ordemServico.dataInicio)"><b>Data inicio: </b>{{ordemServico.dataInicio}}</p>
      <p *ngIf=" existe(ordemServico.dataFim)"><b>Data final: </b>{{ordemServico.dataFim}}</p>
    </div>

    <div *ngIf=" existe(ordemServico.valor)">
      <p><b>Valor: </b>R${{ordemServico.valor}}</p>
    </div>

    <div class="btn" *ngIf="status == 'FINALIZADO' && usuario.role == 'CLIENTE' && !jaAvaliado">
      <button class="btn btn-primary form__button" routerLink="avaliacao">
        Avaliar</button>
    </div>

    <div class="btns__chose" *ngIf="status == 'EM_ORCAMENTO' && usuario.role == 'CLIENTE'">
      <button class="btn btn-success btn__solicitacao btn__aceitar" (click)="respostaOrcamento(true)">
        Aceitar</button>
      <button class="btn btn-danger btn__solicitacao btn__recusar" (click)="respostaOrcamento(false)">
        Recusar</button>
    </div>

    <div class="btns__chose" *ngIf="status == 'SOLICITADO' && usuario.role == 'PRESTADOR'" >
      <button class="btn btn-success btn__solicitacao btn__aceitar" routerLink="orcamento">
        Aceitar</button>
      <button class="btn btn-danger btn__solicitacao btn__recusar" (click)="negarSolicitacao()">
        Recusar</button>
    </div>

    <div class="btn" *ngIf="status == 'EM_ANDAMENTO' && usuario.role == 'PRESTADOR'">
      <button class="btn btn-primary form__button" (click)="finalizarServico()">
        Finalizar</button>
    </div>


    <div class="btn" *ngIf="status == 'FINALIZADO'">
      <button class="btn btn-primary form__button" (click)="relatorioOs()">
        Gerar Relatório</button>
    </div>
  </div>

</main>
